# 心得

## 如何看源码？

对于工作经验不是十分老练的程序猿来说，往往对看源码非常头疼，每每看一段源码时，可能不明白作者的真正意图，又或者被错综复杂的分支搅浑了头脑，我相信这是每个程序猿都有的时期。

我平常工作中对一些开源项目进行二开以及业余时间对中间件的学习，接触过或多或少的源码，有复杂的、简单的、能看懂的、不能看懂的都有，总结对于能看懂的源码无非是：

**当我理解它这个功能的背景以及相关的技术背景之后，我内心已经对此功能点有一个大致的实现方案，从而去看源码是对自身内心的实现方案的一个验证，而不是毫无头绪的瞎串，并且当我们自身内心有一个大致的实现方案之后，看到一些较为复杂的逻辑时，由于我们内心对此逻辑有一个大致的推测，我们便可将该逻辑当作一个黑盒，从而不会被错综复杂的分支搅乱了头脑。**

例如我在阅读`opennms`通过`lldp`协议去生成网络拓扑图时，其实代码并不复杂，但是因为我对于`lldp`协议的不了解，导致我并不知道作者这样做的真正意图，后续当我了解了相关技术背景之后，一切便迎刃而解。

## 如何看懂源码？

就算理解了相关功能背景之后，由于自身对它不是十分熟悉，所以在阅读源码时难免还是会遇到不懂的地方。

我常用的几种方式:

- 首先看**官网，看官网，看官网，重要的事情说三次**，看有没有相关功能的说明
- 看此git log，往往关联了相应的issue，我们可以从issue中了解作者的真正意图
- 可以在仓库提issue向开发者提问，说出你的猜想以及你的疑问
- 对于国内开发的开源项目，往往提供了钉钉群之类的交流渠道，我们也可以去这些地方提问
- 如果还不行的话，老哥先跳过这一段把-。-！，咱先不管他。

例如我看`Dubbo 3.0`的负载均衡算法时，发现这个一致性哈希算法中的实现，和我内心预期不一致，官网也没找到特别的说明，后续我时通过git log找到了对应的issue，发现Dubbo已经把强一致性哈希算法调整为有界负载的一致性哈希算法，当我了解有界负载的一致性哈希算法后，再来看代码，too easy~

## 什么才是一篇优秀的源码分析文章？

经过上述的铺垫，所以我觉得一篇好的源码分析文章是这样的：例如我们要讲解一个功能点的源码，首先对要它的架构进行一个大致的分析，以及这个功能点的业务背景、相关技能点的介绍，当读者看完这些，我相信读者内心已经有对此功能的实现有了一个猜想，然后对此功能点的主分支代码实现进行分析，帮助读者验证自己的猜想。

TODO 假懂？

